# node_logger

***Need Node.js v8.1+ in your PC.***

1) Open two node consoles

2) In both node consoles run command: cd /d "local link", for example: "C:\node_logger" - where "node_logger" is the repository folder

3) In the 1st console run: cd agent

4) In the 2nd console run: cd master

5) In the 1st and the 2nd node console run and after it wait: npm install

6) In the 2nd node console run: node app.js

7) In the 1st node console run: node app.js


# Задание

Система должна состоять из двух приложений (мастер и агента) с обменом данных через сетевой интерфейс (любой: http, socket и т.д.). Для тестирования оба приложения могут быть запущены на одном устройстве. Мастер должен содержать модуль логирования, агент должен содержать модуль подключения к мастеру и отправки данных на него. 

**Агент:**

•	После запуска мастера агент должен его увидеть и автоматически подключиться к нему.

•	После подключения агент должен отправлять мастеру информацию одного из типов: JSON ({ “type”: “test”, “query”: … }), raw data (“Test here!”), any image (binary file) в произвольном порядке каждый равный промежуток времени (например, один запрос в 2 секунды).

•	В случае неуспешного завершения запроса (статус != 200), запрос должен быть отправлен повторно с теми же данными с задержкой в одну секунду. 

**Мастер:**

•	Мастер должен записывать в лог (тестовый файл .log) информацию о любом подключении нового агента с указанием User-Agent (см. Лог).

•	Мастер должен записывать в лог (тестовый файл .log) информацию о входящих запросах от агентов с указанием User-Agent (см. Лог).

•	При получении входящего запроса, мастер отвечает с 200-ым статусом.

•	Мастер в произвольные моменты отключается (программно, не закрывая/перезагружая процесс) на 5 секунд. У агентов это вызывает ошибку соединения. 

•	При получении изображения, оно должно быть сохранено и доступно для просмотра (public folders), залогирована должно быть ссылка на файл.

•	При получении JSON, данные должны быть залогированы вместе с количеством результатов выдачи поиска google по запросу из query поля. Получать к-во результатов можно любым способом.

•	При получении RAW его достаточно просто залогировать.


**Лог:**

•	Пример лога новых агентов:
[15/Feb/2015:06:38:22 +0200] 194.135.154.57 "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:37.0)" – New connection

[15/Feb/2015:06:39:01 +0200] 81.25.53.30 "Opera/9.80 (Windows NT 6.1) Presto/2.12.388 Version/12.17" – New connection
•	Пример лога информации с запросов:
[15/Feb/2015:06:38:22 +0200] 194.135.154.57 "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:37.0)" – New JSON: { type: "test", query: "node js development" }, About 144,000,000 results.

[15/Feb/2015:06:38:22 +0200] 194.135.154.57 "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:37.0)" – New RAW: Test here!

[15/Feb/2015:06:39:01 +0200] 81.25.53.30 "Opera/9.80 (Windows NT 6.1) Presto/2.12.388 Version/12.17" – New Image: localhost:8080/files/1.png (public link)

Разворачивание:

•	Проект-результат должен быть представлен в виде публичного git репозитория.

•	Репозиторий должен содержать README с короткой пошаговой инструкцией по разворачиванию проекта на сервере.   
